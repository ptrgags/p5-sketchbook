<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      language="javascript"
      type="text/javascript"
      src="../../libraries/p5.min.js"
    ></script>
    <script src="https://unpkg.com/tone@15.0.4/build/Tone.js"></script>
    <script type="module">
      import { sketch } from "./SoundTest.js";
      import "../../sketchlib/sketchbook-navbar.js";
      const p5_sketch = new p5(sketch, "sketch");
    </script>
    <link rel="stylesheet" href="../../styles/layout.css" />
  </head>
  <body>
    <sketchbook-navbar></sketchbook-navbar>
    <div class="container">
      <h1>Sound Test (2025)</h1>
      <div class="sketch">
        <canvas id="sketch-canvas" width="500" height="700"></canvas>
      </div>
      <div class="description">
        <p>Click the buttons to select between three different melodies</p>
        <p>Updates:</p>
        <dl>
          <dt>2025-05-28</dt>
          <dd>
            I added a visualization of the musical timeline to give a rough idea
            of the structure of the music.
          </dd>
          <dt>2025-05-14</dt>
          <dd>
            I added a third melody that takes a short motif and transforms it
            into a larger musical work using transposition and retrograde.
          </dd>
          <dt>2025-05-13</dt>
          <dd>
            I started implementing algebraic music types based on
            <cite>The Haskell School of Music</cite> by Paul Hudak and Donya
            Quick, <cite>A Geometry of Music</cite> bu Dmitri Tymoczko, and some
            concepts from
            <a href="https://tidalcycles.org/docs/reference/cycles"
              >Tidal Cycles</a
            >. See the
            <a
              href="https://github.com/ptrgags/p5-sketchbook/blob/main/lab/lablib/music/README.md"
              >Music README</a
            >
            for more details.
          </dd>
        </dl>
        <p>Notes:</p>
        <ul>
          <li>
            This is a sandbox for trying out Tone.js. This way I can add sound
            effects, synthesizers, and music to my sketches.
          </li>
          <li>
            There's plenty more Tone.js can do (sampled audio, connecting audio
            nodes to make custom synthesizers, provide timing information so I
            could e.g. sync a visualization). This sketch will serve as a
            sandbox for experiments.
          </li>
          <li>
            For drawing loops in the timeline, to do so at a fine granularity
            would mean rendering the inner music and then copy/pasting it a
            number of times. However, the tricky bit is the last repeat that in
            some cases will require cropping the content to a shorter width.
          </li>
          <li>
            For drawing cycles in the timeline, the tricky bit is we want to
            draw the nested material, but the widths have to be rescaled based
            on the cycle division.
          </li>
          <li>
            Some more game engine concepts like "scenes/rooms" and "objects"
            would be helpful to add to this repo as I add more interactive
            elements to my code.
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
